# [LCA](https://www.acmicpc.net/problem/11437)

<div align = center>

| 시간 제한 | 메모리 제한 | 제출  | 정답 | 맞은 사람 | 정답 비율 |
| :-------- | :---------- | :---- | :--- | :-------- | :-------- |
| 3 초      | 256 MB      | 11838 | 5217 | 3063      | 43.159%   |

</div>

### 문제

N(2 ≤ N ≤ 50,000)개의 정점으로 이루어진 트리가 주어진다. 트리의 각 정점은 1번부터 N번까지 번호가 매겨져 있으며, 루트는 1번이다.

두 노드의 쌍 M(1 ≤ M ≤ 10,000)개가 주어졌을 때, 두 노드의 가장 가까운 공통 조상이 몇 번인지 출력한다.

---

### 입력

첫째 줄에 노드의 개수 N이 주어지고, 다음 N-1개 줄에는 트리 상에서 연결된 두 정점이 주어진다. 그 다음 줄에는 가장 가까운 공통 조상을 알고싶은 쌍의 개수 M이 주어지고, 다음 M개 줄에는 정점 쌍이 주어진다.

---

### 출력

M개의 줄에 차례대로 입력받은 두 정점의 가장 가까운 공통 조상을 출력한다.

---

### 예제 입력

| 예제 입력1                                                                                                                                                                          | 예제 출력1                      |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------ |
| 15<br/>1 2<br/>1 3<br/>2 4<br/>3 7<br/>6 2<br/>3 8<br/>4 9<br/>2 5<br/>5 11<br/>7 13<br/>10 4<br/>11 15<br/>12 5<br/>14 7<br/>6<br/>6 11<br/>10 9<br/>2 6<br/>7 6<br/>8 13<br/>8 15 | 2<br/>4<br/>2<br/>1<br/>3<br/>1 |

---

### 문제 접근

  - 총 4가지의 자료구조 사용

    - `tree`: 입력받은 트리를 저장하는 양방향 그래프

    - `visited`: 정점의 레벨과 부모 노드를 구하기 위한 `DFS`에 사용되는 visisted

    - `level`: 인덱스 번호에 해당하는 정점의 `level`을 저장하는 벡터

    - `parent`: 인덱스 번호에 해당하는 정점의 `parent`를 저장하는 벡터

  - 양방향 `tree`를 입력받은 후 `DFS`를 수행하여 각 정점별 `level`과 `parent`를 구함

  - `LCA`를 구하려는 두 정점의 level을 비교해 두 정점의 level을 동일하게 맞춰줌(자기 자신을 부모 노드로 변경)

  - level이 동일할 때, 두 정점의 parent가 동일할 때까지 자기 자신을 부모 노드로 변경

    - 단, 주어진 두 정점이 같은 경우, 자기 자신을 출력하고 종료