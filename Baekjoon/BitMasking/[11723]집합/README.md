# [집합](https://www.acmicpc.net/problem/11723)

<div align = center>

| 시간 제한 | 메모리 제한 | 제출  | 정답  | 맞은 사람 | 정답 비율 |
| :-------- | :---------- | :---- | :---- | :-------- | :-------- |
| 1.5 초    | 4 MB        | 41640 | 12872 | 9067      | 29.762%   |

</div>

### 문제

비어있는 공집합 S가 주어졌을 때, 아래 연산을 수행하는 프로그램을 작성하시오.

  - `add x`: S에 x를 추가한다. (1 ≤ x ≤ 20) S에 x가 이미 있는 경우에는 연산을 무시한다.

  - `remove x`: S에서 x를 제거한다. (1 ≤ x ≤ 20) S에 x가 없는 경우에는 연산을 무시한다.

  - `check x`: S에 x가 있으면 1을, 없으면 0을 출력한다. (1 ≤ x ≤ 20)

  - `toggle x`: S에 x가 있으면 x를 제거하고, 없으면 x를 추가한다. (1 ≤ x ≤ 20)

  - `all`: S를 {1, 2, ..., 20} 으로 바꾼다.

  - `empty`: S를 공집합으로 바꾼다. 

---

### 입력

첫째 줄에 수행해야 하는 연산의 수 M (1 ≤ M ≤ 3,000,000)이 주어진다.

둘째 줄부터 M개의 줄에 수행해야 하는 연산이 한 줄에 하나씩 주어진다.

---

### 출력

`check` 연산이 주어질때마다, 결과를 출력한다.

---

### 예제 입력

| 예제 입력1                                                                                                                                                                                                                                                                                                                   | 예제 출력1                                                                                  |
| :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------ |
| 26<br/>add 1<br/>add 2<br/>check 1<br/>check 2<br/>check 3<br/>remove 2<br/>check 1<br/>check 2<br/>toggle 3<br/>check 1<br/>check 2<br/>check 3<br/>check 4<br/>all<br/>check 10<br/>check 20<br/>toggle 10<br/>remove 20<br/>check 10<br/>check 20<br/>empty<br/>check 1<br/>toggle 1<br/>check 1<br/>toggle 1<br/>check 1 | 1<br/>1<br/>0<br/>1<br/>0<br/>1<br/>0<br/>1<br/>0<br/>1<br/>1<br/>0<br/>0<br/>0<br/>1<br/>0 |

---

### 문제 접근

  - 메모리 제한으로 인해 `set`이나 `vector`같은 컨테이너로는 해결 불가

    - `int`형은 `4byte`인데, 100만개의 연산이 `add`라면 이미 메모리를 초과함

  - 비트연산을 이용해 문제 해결

  - `add`: 주어진 수 만큼 `shift` 연산을 수행 후 `set`을 의미하는 `int`형 변수 s에 or 연산을 수행 후 초기화

    ```cpp
    s |= (1 << n);
    ```

  - `remove`: 주어진 수가 이미 `set`에 포함되어있는지 & 연산으로 확인 후 `xnor` 연산을 이용해 해당 수 제거

    ```cpp
    if((s & (1 << n)) != 0)
      s ^= (1 << n);
    ```

  - `check`: (s & (1 << n))이 `0`이라면 해당 수가 없는 것이고 `1`이라면 해당 수가 있는 것

  - `toggle`: `check`에서 사용된 연산을 이용해 해당 수가 있으면 `remove`를 수행하고 해당 수가 없으면 `add` 수행

  - `all`: for문을 20번 수행하며 `i`만큼 shift된 수를 계속 더함

  - `empty`: s를 0으로 초기화

---

### 다른 사람의 풀이

  - `remove`: `s &= ~(1 << n);`

  - `toggle`: `s ^= (1 << n);`

  - `all`: `s = (1 << 21) - 1;`