# [구간 합 구하기 5](https://www.acmicpc.net/problem/11660)

<div align = center>

| 시간 제한 | 메모리 제한 | 제출  | 정답 | 맞은 사람 | 정답 비율 |
| :-------- | :---------- | :---- | :--- | :-------- | :-------- |
| 1 초      | 256 MB      | 15247 | 7683 | 6113      | 50.127%   |

</div>

### 문제

N×N개의 수가 N×N 크기의 표에 채워져 있다. (x1, y1)부터 (x2, y2)까지 합을 구하는 프로그램을 작성하시오. (x, y)는 x행 y열을 의미한다.

예를 들어, N = 4이고, 표가 아래와 같이 채워져 있는 경우를 살펴보자.

<table>
  <tr>
    <td align=center>1</td>
    <td align=center>2</td>
    <td align=center>3</td>
    <td align=center>4</td>
  </tr>
  <tr>
    <td align=center>2</td>
    <td align=center>3</td>
    <td align=center>4</td>
    <td align=center>5</td>
  </tr>
  <tr>
    <td align=center>3</td>
    <td align=center>4</td>
    <td align=center>5</td>
    <td align=center>6</td>
  </tr>
  <tr>
    <td align=center>4</td>
    <td align=center>5</td>
    <td align=center>6</td>
    <td align=center>7</td>
  </tr>
</table>

여기서 (2, 2)부터 (3, 4)까지 합을 구하면 3+4+5+4+5+6 = 27이고, (4, 4)부터 (4, 4)까지 합을 구하면 7이다.

표에 채워져 있는 수와 합을 구하는 연산이 주어졌을 때, 이를 처리하는 프로그램을 작성하시오.

---

### 입력

첫째 줄에 표의 크기 N과 합을 구해야 하는 횟수 M이 주어진다. (1 ≤ N ≤ 1024, 1 ≤ M ≤ 100,000) 둘째 줄부터 N개의 줄에는 표에 채워져 있는 수가 1행부터 차례대로 주어진다. 다음 M개의 줄에는 네 개의 정수 x1, y1, x2, y2 가 주어지며, (x1, y1)부터 (x2, y2)의 합을 구해 출력해야 한다. 표에 채워져 있는 수는 1,000보다 작거나 같은 자연수이다. (x1 ≤ x2, y1 ≤ y2)

---

### 출력

총 M줄에 걸쳐 (x1, y1)부터 (x2, y2)까지 합을 구해 출력한다.

---

### 예제 입력

| 예제 입력1                                                                              | 예제 출력1      |
| :-------------------------------------------------------------------------------------- | :-------------- |
| 4 3<br/>1 2 3 4<br/>2 3 4 5<br/>3 4 5 6<br/>4 5 6 7<br/>2 2 3 4<br/>3 4 3 4<br/>1 1 4 4 | 27<br/>6<br/>64 |

| 예제 입력2                                                          | 예제 출력2          |
| :------------------------------------------------------------------ | :------------------ |
| 2 4<br/>1 2<br/>3 4<br/>1 1 1 1<br/>1 2 1 2<br/>2 1 2 1<br/>2 2 2 2 | 1<br/>2<br/>3<br/>4 |

---

### 문제 접근

  - `DP`와 `누적 합` 문제

  - 2차원 벡터 `dp`를 선언하고 입력받은 matrix 정보를 기반으로 `dp` 초기화

    - `dp[x][y]`의 값은 왼쪽 상단점이 `1,1`이고 오른쪽 하단점이 `x,y`로 하는 부분 직사각 배열의 합을 의미

  - `dp[x1][y1]`을 왼쪽 상단점으로하고 `dp[x2][y2]`을 오른쪽 하단점으로 하는 부분 직사각 배열의 합

    - `dp[x2][y2] - dp[x1-1][y2] - dp[x2][y1-1] + dp[x1-1][y1-1]`

    - 부분 직사각 배열에 포함되지 않는 부분을 빼주고, 중복 감산된 부분을 한 번 더해줌