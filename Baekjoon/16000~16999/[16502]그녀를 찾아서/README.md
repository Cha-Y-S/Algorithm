# [그녀를 찾아서](https://www.acmicpc.net/problem/16502)

<div align = center>

| 시간 제한 | 메모리 제한 | 제출 | 정답 | 맞은 사람 | 정답 비율 |
| :-------- | :---------- | :--- | :--- | :-------- | :-------- |
| 2 초      | 512 MB      | 127  | 96   | 82        | 80.392%   |

</div>

### 문제

그녀와 백화점을 가면 우리는 각자 따로따로 매장을 돌아다닌다. 중간에 그녀를 만나려면 어느 매장으로 가봐야 할까? 그녀는 백화점 쇼핑 중에는 전화벨로 방해받고 싶지 않아서 핸드폰을 꺼놓고 있다.

우리는 주어진 시간에 각 매장별로 그녀가 그 곳에 있을만한 확률을 보여주는 프로그램을 만들려고 한다.

입력은 유한한 그래프와 양의 정수이다. 그래프는 그녀의 움직임을 모델한 것이고, 움직임은 10분 단위로 일어난다고 하자. 양의 정수는 백화점에서 헤어진지 몇 10분 째인지를 나타낸다. 그래프의 노드는 매장을 의미하고, 노드 사이의 화살표는 한 매장에서 다른 매장으로 이동하는 관계이고, 화살표에는 그 이동의 확률이 표현되어 있다. 한 노드에서 바깥으로 가는 화살표가 여럿 있을 수 있는데 그 화살표 들에 적혀있는 확률들의 합은 반드시 1이어야 한다. 그녀가 백화점으로 들어와서 처음으로 방문하는 매장은 주어진 매장들 중에 같은 확률로 (무작위로) 정해진다고 하자

예를 들어, 그래프가

<img src="https://upload.acmicpc.net/ab89f897-3087-404c-b208-439896ab36ad/-/preview/" width="190" height="181" />

이면, A매장에서 B매장으로 항상 가고, B매장에서는 30% 확률로 C매장으로 움직이고, 등등.

이 경우, 임의의 매장에서 쇼핑을 시작해서 그녀가 10분후에 각 매장에 있을 확률은 A 15%, B 25%, C. 7.5%, D 52.5% 이다. 20분후는 각각 4.5%, 15%, 7.5%, 73% 이다.

위와 같은 결과를 계산하는 프로그램을 작성하라. 매장은 네개(A, B, C, D)로 정해져 있다고 가정한다. 입력은 다섯 매장을 다니는 그녀의 움직임 그래프와 쇼핑시간 (단위: 10분) 이다.

---

### 입력

첫째 줄에 쇼핑 시간 (단위: 10분)이 주어진다. 쇼핑 시간은 10보다 작거나 같은 자연수이다.

둘째 줄에는 간선의 개수 M이 주어진다. (1 ≤ M ≤ 10)

셋째 줄부터 M개의 줄에는 간선의 정보가 주어진다. 간선의 정보는 시작 매장, 도착 매장, 그리고 확률이다.

---

### 출력

각 매장 A, B, C, D에 그녀가 있을 확률을 퍼센트 단위로 출력한다. 절대/상대 오차는 10<sup>-2</sup>까지 허용한다.

---

### 예제 입력

| 예제 입력1                                                                      | 예제 출력1                        |
| :------------------------------------------------------------------------------ | :-------------------------------- |
| 2<br/>6<br/>A B 1.0<br/>B C 0.3<br/>B D 0.7<br/>C A 0.6<br/>C D 0.4<br/>D D 1.0 | 4.50<br/>15.00<br/>7.50<br/>73.00 |

---

### 문제 접근

  - `DP` 문제

  - 입력받을 그래프를 저장할 `graph`를 선언하고 `4 X (t + 1)` 크기의 `dp` 선언
  
  - `dp`의 각 행은 각 매장 당 회차별로 그녀가 해당 매장에 있을 확률을 의미

    - 0번째 열의 모든 행의 값은 `0.25`로 초기화(매장의 개수가 4개이기 때문)

  - 각 회차별로 그래프를 순회하면서 각 매장으로 갈 수 있는 모든 경우에 수에 대해 입력받은 확률값과 이동 전 기준 매장 위치의 확률값을 곱한 후 모든 경우를 더함(메모이제이션 활용)

  - 그래프 순회가 완료되면 마지막 회차에 대해 각 매장별로 그녀가 있을 수 있는 확률을 출력